#!/usr/bin/env ruby -ws

$o ||= false
$d ||= false

type = ARGV.shift
abort "#{File.basename $0}: Need a type" unless type

require "#{type}_analyzer"

name     = "#{type.capitalize}Analyzer"
klass    = Object.const_get name
analyzer = klass.new
graph    = analyzer.run

graph.save name, $d ? nil : "png"

system "open #{name}.#{$d ? "dot" : "png"}" if $o
